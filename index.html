<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#060913"/>
  <title>Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ù‡ÙˆÙ„Ø¯Ù… | Ø¢Ù…ÙˆØ²Ø´ Ù¾ÙˆÚ©Ø± (Û±Û°Û°Û° ØµÙØ­Ù‡)</title>
  <meta name="description" content="Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ù‡ÙˆÙ„Ø¯Ù…: Ø¢Ù…ÙˆØ²Ø´ Ù¾ÙˆÚ©Ø± ØªÚ¯Ø²Ø§Ø³ Ù‡ÙˆÙ„Ø¯Ù… Ø§Ø² Ù…Ø¨ØªØ¯ÛŒ ØªØ§ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ â€” Ù†Ø³Ø®Ù‡ Û±Û°Û°Û° ØµÙØ­Ù‡â€ŒØ§ÛŒ Ø¨Ø§ Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒØŒ Ø³Ø±Ú†ØŒ Ù¾ÛŒØ´Ø±ÙØª Ùˆ ØµÙØ­Ø§Øª Ù…Ø³ØªÙ‚Ù„."/>

  <style>
    :root{
      --bg0:#050714; --bg1:#0A1230;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.035);
      --line: rgba(255,255,255,.10);
      --txt:#ECF3FF; --muted: rgba(236,243,255,.70); --muted2: rgba(236,243,255,.52);
      --neon:#55D7FF; --ok:#3DFFB6; --gold:#FFD76A; --danger:#FF5D73; --purple:#A78BFA;
      --tap: 48px; --r14:14px; --r18:18px; --r22:22px;
      --safeTop: env(safe-area-inset-top, 0px);
      --safeBot: env(safe-area-inset-bottom, 0px);
      --safeL: env(safe-area-inset-left, 0px);
      --safeR: env(safe-area-inset-right, 0px);
      color-scheme: dark;
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--txt);
      background:
        radial-gradient(900px 700px at 18% 10%, rgba(85,215,255,.12), transparent 60%),
        radial-gradient(900px 700px at 82% 15%, rgba(61,255,182,.10), transparent 60%),
        radial-gradient(1000px 900px at 50% 115%, rgba(255,215,106,.08), transparent 60%),
        linear-gradient(180deg,var(--bg0),var(--bg1));
      overflow-x:hidden;
    }
    a{color:inherit}
    .topbar{
      position: sticky; top:0; z-index:60;
      padding-top: var(--safeTop);
      background: rgba(5,7,20,.78);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .topbar .inner{
      max-width:1100px; margin:0 auto;
      padding: 10px calc(12px + var(--safeR)) 10px calc(12px + var(--safeL));
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width:46px;height:46px;border-radius:18px;
      display:grid;place-items:center; user-select:none;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(120% 120% at 30% 30%, rgba(85,215,255,.22), rgba(61,255,182,.12)),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset, 0 18px 60px rgba(0,0,0,.35);
      font-size:18px;
    }
    .brand{flex:1; min-width:0}
    .brand b{
      display:block; font-size:15px; font-weight:950;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .brand span{
      display:block; margin-top:4px;
      font-size:12px; color:var(--muted);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .iconBtn{
      height: var(--tap); min-width: var(--tap);
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--txt);
      cursor:pointer;
      display:grid;place-items:center;
      font-weight: 950;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
      user-select:none;
    }
    .iconBtn:active{ transform: scale(.98); }

    .wrap{
      max-width:1100px; margin:0 auto;
      padding: 12px calc(12px + var(--safeR)) calc(92px + var(--safeBot)) calc(12px + var(--safeL));
    }

    .searchRow{
      max-width:1100px; margin:0 auto;
      padding: 0 calc(12px + var(--safeR)) 12px calc(12px + var(--safeL));
      display:flex; gap:10px; align-items:center;
    }
    .search{
      flex:1;
      height: var(--tap);
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      display:flex; align-items:center; gap:10px;
      padding: 0 12px;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .search input{
      flex:1; background:transparent; border:0; outline:none;
      color:var(--txt); font-size:14px;
    }
    .search input::placeholder{ color: rgba(236,243,255,.45); }
    .pill{
      height: var(--tap);
      padding: 0 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      display:flex; align-items:center; gap:8px;
      font-size: 12px; font-weight:950;
      user-select:none; white-space:nowrap;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--ok);
      box-shadow: 0 0 0 4px rgba(61,255,182,.12), 0 0 24px rgba(61,255,182,.25);
    }

    .grid{ display:grid; gap:10px; }
    .grid2{ display:grid; gap:10px; }
    @media (min-width: 920px){
      .wrap{ padding-bottom: 22px; }
      .grid2{ grid-template-columns: 1.2fr .8fr; }
      .bottomNav{ display:none; }
    }

    .card{
      border-radius: var(--r22);
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.035));
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      overflow:hidden;
    }
    .pad{ padding: 14px; }
    .divider{ height:1px; background: rgba(255,255,255,.08); }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    .btn{
      height: var(--tap);
      padding: 0 14px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--txt);
      font-weight: 950;
      cursor:pointer;
      user-select:none;
    }
    .btn:active{ transform: scale(.99); }
    .btn.good{ border-color: rgba(61,255,182,.26); background: rgba(61,255,182,.10); }
    .btn.danger{ border-color: rgba(255,93,115,.26); background: rgba(255,93,115,.09); }
    .btn.gold{ border-color: rgba(255,215,106,.28); background: rgba(255,215,106,.09); }
    .btn.neon{ border-color: rgba(85,215,255,.30); background: rgba(85,215,255,.10); }

    .progressTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .chip{
      padding: 7px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      font-size: 12px;
      color: var(--muted);
      user-select:none;
      white-space:nowrap;
    }
    .chip strong{ color: var(--txt); }
    .bar{
      height:10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      overflow:hidden;
      margin-top:10px;
    }
    .bar i{
      display:block; height:100%; width:0%;
      background: linear-gradient(90deg, rgba(85,215,255,.95), rgba(61,255,182,.95), rgba(255,215,106,.92));
      box-shadow: 0 0 28px rgba(85,215,255,.22);
      transition: width .28s ease;
    }

    .listHeader{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .small{ color: var(--muted); font-size: 12px; line-height: 1.8; }
    .kRow{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;
    }
    .kRow input, .kRow select{
      height: var(--tap);
      padding: 0 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--txt);
      outline:none;
      font-size: 13px;
      flex: 1;
      min-width: 140px;
    }

    .list{
      margin-top:10px;
      display:grid;
      gap:8px;
    }
    .rowBtn{
      width:100%;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
      border-radius: 18px;
      padding: 12px 12px;
      display:flex; align-items:center; gap:10px;
      cursor:pointer;
      user-select:none;
      text-align:right;
    }
    .rowBtn:hover{ border-color: rgba(85,215,255,.22); }
    .rowBtn:active{ transform: scale(.997); }
    .badge{
      width:38px;height:38px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      flex:0 0 auto;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .meta{ flex:1; min-width:0; }
    .meta .t{
      font-weight: 950;
      font-size: 13.5px;
      display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    }
    .meta .d{
      margin-top:5px;
      color: var(--muted);
      font-size: 12px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .status{
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      font-size: 12px;
      color: var(--muted2);
      white-space:nowrap;
    }
    .status.ok{ color: rgba(61,255,182,.95); border-color: rgba(61,255,182,.22); background: rgba(61,255,182,.08); }
    .status.todo{ color: rgba(255,215,106,.95); border-color: rgba(255,215,106,.22); background: rgba(255,215,106,.08); }

    /* Overlay page */
    .page{
      position: fixed;
      inset: 0;
      z-index: 120;
      background:
        radial-gradient(900px 700px at 22% 12%, rgba(85,215,255,.12), transparent 60%),
        radial-gradient(900px 700px at 84% 18%, rgba(61,255,182,.10), transparent 60%),
        linear-gradient(180deg, rgba(5,7,20,.98), rgba(10,18,48,.98));
      transform: translateX(110%);
      transition: transform .22s ease;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding: calc(12px + var(--safeTop)) calc(12px + var(--safeR)) calc(18px + var(--safeBot)) calc(12px + var(--safeL));
      border-left: 1px solid rgba(255,255,255,.06);
      /* Ù…Ù‡Ù…: Ù‡ÛŒÚ† Ù„Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ú©Ù„ÛŒÚ© Ø±Ùˆ Ù†Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡ */
      pointer-events: auto;
    }
    .page.show{ transform: translateX(0); }
    .pageInner{
      max-width: 900px;
      margin: 0 auto;
      padding-bottom: 20px;
    }
    .pageTop{
      display:flex; align-items:center; gap:10px;
      margin-bottom: 12px;
    }
    .pageTitle{ flex:1; min-width:0; }
    .pageTitle h2{ margin:0; font-size: 16px; font-weight: 950; }
    .pageTitle p{ margin:6px 0 0; color: var(--muted); font-size: 12px; line-height: 1.8; }

    .contentCard{
      border-radius: var(--r22);
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.035));
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      overflow:hidden;
      margin-top: 10px;
    }
    .contentPad{ padding: 14px; }
    h3{ margin: 0 0 8px; font-size: 14px; font-weight: 950; }
    p{ margin:0; color: rgba(236,243,255,.82); font-size: 13px; line-height: 1.95; }
    ul{ margin:8px 0 0; padding:0 18px 0 0; color: rgba(236,243,255,.84); font-size: 13px; line-height: 2.0; }
    li{ margin:2px 0; }
    .note{
      margin-top: 10px;
      padding: 12px;
      border-radius: 18px;
      border:1px dashed rgba(85,215,255,.26);
      background: rgba(85,215,255,.06);
      color: rgba(236,243,255,.90);
      font-size: 13px;
      line-height: 1.9;
    }
    .note.ok{ border-color: rgba(61,255,182,.26); background: rgba(61,255,182,.06); }
    .note.warn{ border-color: rgba(255,93,115,.30); background: rgba(255,93,115,.06); }
    .note.gold{ border-color: rgba(255,215,106,.28); background: rgba(255,215,106,.06); }
    mark{
      background: rgba(255,215,106,.18);
      color: rgba(236,243,255,.95);
      border:1px solid rgba(255,215,106,.22);
      padding: 0 4px;
      border-radius: 8px;
    }

    /* Mobile bottom tabs */
    .bottomNav{
      position: fixed; left:0; right:0; bottom:0;
      z-index: 70;
      padding: 10px calc(12px + var(--safeR)) calc(10px + var(--safeBot)) calc(12px + var(--safeL));
      background: rgba(5,7,20,.82);
      backdrop-filter: blur(14px);
      border-top: 1px solid rgba(255,255,255,.08);
    }
    .tabs{ display:flex; gap:10px; max-width:1100px; margin: 0 auto; }
    .tab{
      flex:1;
      height: 46px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: var(--txt);
      display:flex; align-items:center; justify-content:center; gap:8px;
      font-weight: 950;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
    }
    .tab.on{
      border-color: rgba(61,255,182,.28);
      background: rgba(61,255,182,.10);
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: calc(86px + var(--safeBot));
      transform: translateX(-50%) translateY(10px);
      z-index: 200;
      padding: 12px 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.60);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      color: rgba(236,243,255,.92);
      font-weight: 950;
      font-size: 12px;
      opacity: 0;
      pointer-events: none;
      transition: .22s ease;
      max-width: min(560px, 92vw);
      text-align:center;
    }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="inner">
      <div class="logo">â™ ï¸</div>
      <div class="brand">
        <b>Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ù‡ÙˆÙ„Ø¯Ù… â€” Ù†Ø³Ø®Ù‡ Û±Û°Û°Û° ØµÙØ­Ù‡â€ŒØ§ÛŒ</b>
        <span>Ù‡Ø± ØµÙØ­Ù‡ Ù„ÛŒÙ†Ú© Ù…Ø³ØªÙ‚Ù„ Ø¯Ø§Ø±Ø¯: /#p-0001 ØªØ§ /#p-1000 âœ…</span>
      </div>
      <button class="iconBtn" id="resetBtn" type="button" title="Ø±ÛŒØ³Øª Ù¾ÛŒØ´Ø±ÙØª">â†º</button>
    </div>

    <div class="searchRow">
      <div class="search">
        <span style="opacity:.85">ğŸ”</span>
        <input id="q" type="search" inputmode="search" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø§Ø®Ù„ Û±Û°Û°Û° ØµÙØ­Ù‡â€¦ Ù…Ø«Ù„Ø§: Ù¾ÙˆØ²ÛŒØ´Ù†ØŒ Ø±Ù†Ø¬ØŒ Ø¨Ù„ÙˆÙØŒ Ú©Ø§Ù„ØŒ 3bet" />
      </div>
      <div class="pill" title="Ø°Ø®ÛŒØ±Ù‡ Ø±ÙˆØ´Ù† Ø§Ø³Øª">
        <span class="dot"></span>
        <span>Ø°Ø®ÛŒØ±Ù‡: ÙØ¹Ø§Ù„</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid2">
      <section class="card">
        <div class="pad">
          <div class="progressTop">
            <b>Ù¾ÛŒØ´Ø±ÙØª ğŸ˜ˆ</b>
            <div class="chips">
              <span class="chip"><strong id="doneCount">0</strong> ØªÛŒÚ©</span>
              <span class="chip"><strong id="totalCount">1000</strong> Ú©Ù„</span>
              <span class="chip"><strong id="pct">0%</strong></span>
            </div>
          </div>
          <div class="bar"><i id="bar"></i></div>

          <div class="actions">
            <button class="btn good" id="markBtn" type="button">âœ… Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ùˆ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…</button>
            <button class="btn gold" id="randomBtn" type="button">ğŸ² ØµÙØ­Ù‡ Ø±Ù†Ø¯ÙˆÙ…</button>
            <button class="btn neon" id="openFirstBtn" type="button">Ø´Ø±ÙˆØ¹ Ø§Ø² 0001</button>
            <button class="btn danger" id="resetAllBtn" type="button">Ø±ÛŒØ³Øª Ú©Ø§Ù…Ù„</button>
          </div>

          <div class="note ok">
            âœ… Ù†Ú©ØªÙ‡: Â«Û±Û°Û°Û° ØµÙØ­Ù‡Â» Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ù‚Ø¹ÛŒ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒØ´Ù‡ ÙˆÙ„ÛŒ Ø¨Ø§ Ø±ÙˆØ´ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ØªØ§ Ú¯ÙˆØ´ÛŒ Ù‡Ù†Ú¯ Ù†Ú©Ù†Ù‡.
          </div>

          <div class="kRow">
            <input id="jumpInput" type="number" min="1" max="1000" placeholder="Ø±ÙØªÙ† Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ ØµÙØ­Ù‡â€¦ Ù…Ø«Ù„Ø§ 250"/>
            <select id="cat">
              <option value="all">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§</option>
              <option value="Beginner">Ù…Ø¨ØªØ¯ÛŒ (1â€“200)</option>
              <option value="Preflop">Ù¾Ø±ÛŒÙÙ„Ø§Ù¾ (201â€“400)</option>
              <option value="Postflop">Ù¾Ø³Øªâ€ŒÙÙ„Ø§Ù¾ (401â€“650)</option>
              <option value="Advanced">Ù¾ÛŒØ´Ø±ÙØªÙ‡ (651â€“850)</option>
              <option value="Mental">Ø°Ù‡Ù†/Ø³Ø±Ù…Ø§ÛŒÙ‡ (851â€“950)</option>
              <option value="Glossary">ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡ (951â€“1000)</option>
            </select>
            <button class="btn neon" id="jumpBtn" type="button">Ø¨Ø±Ùˆ</button>
          </div>

          <div class="small" style="margin-top:10px">
            ğŸ”¥ Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ â€œÙˆØ§Ù‚Ø¹Ø§ Ù…ØªÙ†Ù Ù‡Ø± ØµÙØ­Ù‡ Ø®Ø§Øµ Ùˆ Ù…ÙØµÙ„â€ Ø¨Ø§Ø´Ù‡ØŒ Ù…Ù† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ Ù…ÛŒØ§Ù… Ùˆ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¨Ø®Ø´
            (Ù…Ø«Ù„Ø§ Ù¾Ø±ÛŒÙÙ„Ø§Ù¾/Ù¾Ø³ØªÙÙ„Ø§Ù¾/ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡) Ù…Ø­ØªÙˆØ§ÛŒ Ø³Ù†Ú¯ÛŒÙ†â€ŒØªØ± ØªØ²Ø±ÛŒÙ‚ Ù…ÛŒâ€ŒÚ©Ù†Ù…. Ø§Ù„Ø§Ù† ØªÙ…Ø±Ú©Ø²: Ø§Ø³Ú©Ù„Øª Û±Û°Û°Û° ØµÙØ­Ù‡ + Ø³Ø±Ø¹Øª.
          </div>
        </div>
      </section>

      <section class="card">
        <div class="pad">
          <div class="listHeader">
            <b>Ù„ÛŒØ³Øª ØµÙØ­Ø§Øª</b>
            <span class="small" id="listInfo">Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øªâ€¦</span>
          </div>
          <div class="small" style="margin-top:6px">
            âœ… Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª Ù…ÙˆØ¨Ø§ÛŒÙ„ØŒ Ù„ÛŒØ³Øª Ø¨Ø§ â€œØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒâ€ Ù…ÛŒØ§Ø¯ (Ù‡Ø± Ø¨Ø§Ø± 60 ØªØ§).
          </div>
          <div class="actions">
            <button class="btn" id="prevListBtn" type="button">â—€ Ù‚Ø¨Ù„ÛŒ</button>
            <button class="btn" id="nextListBtn" type="button">Ø¨Ø¹Ø¯ÛŒ â–¶</button>
          </div>

          <div class="list" id="list"></div>

          <div class="note gold">
            ğŸ’¡ Ù„ÛŒÙ†Ú© Ù…Ø³ØªÙ‚ÛŒÙ… Ù‡Ø± ØµÙØ­Ù‡: <b>#p-XXXX</b>  
            Ù…Ø«Ø§Ù„: <b>#p-0250</b> ÛŒØ¹Ù†ÛŒ ØµÙØ­Ù‡ 250
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="bottomNav">
    <div class="tabs">
      <button class="tab on" type="button" data-tab="home">ğŸ  Ø®Ø§Ù†Ù‡</button>
      <button class="tab" type="button" data-tab="list">ğŸ“– Ù„ÛŒØ³Øª</button>
      <button class="tab" type="button" data-tab="random">ğŸ² Ø±Ù†Ø¯ÙˆÙ…</button>
    </div>
  </footer>

  <!-- Overlay Page -->
  <section class="page" id="page" aria-hidden="true">
    <div class="pageInner">
      <div class="pageTop">
        <button class="iconBtn" id="backBtn" type="button" title="Ø¨Ø§Ø²Ú¯Ø´Øª">â†</button>
        <div class="pageTitle">
          <h2 id="pageH">â€”</h2>
          <p id="pageSub">â€”</p>
        </div>
        <button class="iconBtn" id="copyLinkBtn" type="button" title="Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú©">â˜</button>
      </div>

      <div class="contentCard">
        <div class="contentPad" id="pageBody"></div>
      </div>

      <div class="contentCard">
        <div class="contentPad">
          <div class="actions">
            <button class="btn good" id="markInsideBtn" type="button">âœ… ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…</button>
            <button class="btn" id="prevBtn" type="button">â—€ Ù‚Ø¨Ù„ÛŒ</button>
            <button class="btn" id="nextBtn" type="button">Ø¨Ø¹Ø¯ÛŒ â–¶</button>
          </div>
          <div class="note ok">
            âœ… Ø§ÛŒÙ† ØµÙØ­Ù‡ Ù…Ø«Ù„ Ø³Ø§ÛŒØª ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø² Ù…ÛŒØ´Ù‡ Ùˆ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ Ù‡Ù… Û±Û°Û°Ùª Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†.
          </div>
        </div>
      </div>

    </div>
  </section>

  <div class="toast" id="toast"></div>

<script>
  const $ = (s, el=document)=>el.querySelector(s);
  const $$ = (s, el=document)=>[...el.querySelectorAll(s)];

  const LS_KEY = "holdem_academy_1000_progress_v1";

  function toast(msg){
    const t = $("#toast");
    t.textContent = msg;
    t.classList.add("show");
    clearTimeout(toast._tm);
    toast._tm = setTimeout(()=>t.classList.remove("show"), 1800);
  }

  function loadProgress(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      return raw ? JSON.parse(raw) : {};
    }catch{ return {}; }
  }
  function saveProgress(p){
    localStorage.setItem(LS_KEY, JSON.stringify(p));
  }
  function resetProgress(){
    localStorage.removeItem(LS_KEY);
    toast("Ø±ÛŒØ³Øª Ø´Ø¯ ğŸ§¼");
    updateProgressUI();
    renderList();
    updateMarkButtons();
  }

  // --- 1000 Pages Generator ---
  function pad4(n){ return String(n).padStart(4, "0"); }
  function pageId(n){ return `p-${pad4(n)}`; }

  function categoryOf(n){
    if(n<=200) return "Beginner";
    if(n<=400) return "Preflop";
    if(n<=650) return "Postflop";
    if(n<=850) return "Advanced";
    if(n<=950) return "Mental";
    return "Glossary";
  }

  const CAT_META = {
    Beginner: {icon:"ğŸŒ±", name:"Ù…Ø¨ØªØ¯ÛŒ"},
    Preflop: {icon:"ğŸ§ ", name:"Ù¾Ø±ÛŒÙÙ„Ø§Ù¾"},
    Postflop:{icon:"ğŸ¯", name:"Ù¾Ø³Øªâ€ŒÙÙ„Ø§Ù¾"},
    Advanced:{icon:"ğŸ¦¾", name:"Ù¾ÛŒØ´Ø±ÙØªÙ‡"},
    Mental: {icon:"ğŸ§˜", name:"Ø°Ù‡Ù†/Ø³Ø±Ù…Ø§ÛŒÙ‡"},
    Glossary:{icon:"ğŸ“š", name:"ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡"},
  };

  function makeBody(n){
    const cat = categoryOf(n);
    const meta = CAT_META[cat];
    const title = `ØµÙØ­Ù‡ ${n} â€” ${meta.name}`;

    // í…œÙ¾Ù„ÛŒØª Ù…Ø­ØªÙˆØ§ÛŒÛŒ: Ø·ÙˆÙ„Ø§Ù†ÛŒ + Ù‚Ø§Ø¨Ù„ ÙÙ‡Ù… + Ù‚Ø§Ø¨Ù„ ØªÙˆØ³Ø¹Ù‡
    // (Ø¨Ø±Ø§ÛŒ Ø³Ù†Ú¯ÛŒÙ†â€ŒØªØ± Ø´Ø¯Ù†ØŒ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¨Ø®Ø´ Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ø¨Ø³ÛŒØ§Ø± Ù…ÙØµÙ„â€ŒØªØ± ØªØ²Ø±ÛŒÙ‚ Ú©Ù†Ù…)
    let core = "";
    if(cat==="Beginner"){
      core = `
        <h3>Ù‡Ø¯Ù Ø§ÛŒÙ† ØµÙØ­Ù‡</h3>
        <p>ØªÙˆ Ø§ÛŒÙ† ØµÙØ­Ù‡ ÛŒÚ© Ù…ÙÙ‡ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ø±Ø§ Ø®ÛŒÙ„ÛŒ Ø³Ø§Ø¯Ù‡ ÛŒØ§Ø¯ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø¨Ø§ ÛŒÚ© Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø³Ø±ÛŒØ¹ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ ØªÙˆ Ø¨Ø§Ø²ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØ§Ø´ Ú©Ù†ÛŒ.</p>
        <h3>Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ù…Ø¨ØªØ¯ÛŒ</h3>
        <ul>
          <li>Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± Ø­Ø±Ú©Øª: Â«Ù‡Ø¯ÙÙ… Ú†ÛŒÙ‡ØŸÂ»</li>
          <li>Ù¾ÙˆØ²ÛŒØ´Ù†Ù… Ú†ÛŒÙ‡ØŸ Ø¯ÛŒØ±ØªØ± Ø­Ø±Ù Ù…ÛŒâ€ŒØ²Ù†Ù… ÛŒØ§ Ø²ÙˆØ¯ØªØ±ØŸ</li>
          <li>Ø¨Ø§ Ø¯Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ Ø§Ù…ÛŒØ¯ Ø¨Ø§Ø²ÛŒ Ù†Ú©Ù†</li>
          <li>ÙÙ‚Ø· Ú†ÙˆÙ† Ú©Ø§Ø±Øª Ø®ÙˆØ´Ú¯Ù„Ù‡ ÙˆØ§Ø±Ø¯ Ù†Ø´Ùˆ ğŸ˜ˆ</li>
        </ul>
        <div class="note ok">âœ… Ù‚Ø§Ù†ÙˆÙ† Ø±Ø´Ø¯: Ù‡Ø± Ø¬Ù„Ø³Ù‡ ÙÙ‚Ø· Û± Ú†ÛŒØ² ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ± Ùˆ Ù‡Ù…ÙˆÙ† Ø±Ùˆ ØªÙ…Ø±ÛŒÙ† Ú©Ù†.</div>
      `;
    } else if(cat==="Preflop"){
      core = `
        <h3>Ù‚Ø§Ù†ÙˆÙ† Ø·Ù„Ø§ÛŒÛŒ Ù¾Ø±ÛŒÙÙ„Ø§Ù¾</h3>
        <p>Ù¾Ø±ÛŒÙÙ„Ø§Ù¾ Ø¬Ø§ÛŒÛŒÙ‡ Ú©Ù‡ Â«Ù†Ø¸Ù…Â» Ù…ÛŒâ€ŒØ³Ø§Ø²Ù‡. Ø®ÛŒÙ„ÛŒ Ø§Ø² Ù¾ÙˆÙ„â€ŒÙ‡Ø§ Ø§Ø² Ù‡Ù…ÛŒÙ†Ø¬Ø§ Ø­ÙØ¸ Ù…ÛŒØ´Ù‡.</p>
        <h3>Ø³Ù‡ ØªØµÙ…ÛŒÙ… Ø§ØµÙ„ÛŒ</h3>
        <ul>
          <li><b>Raise</b>: ÙˆÙ‚ØªÛŒ Ø¯Ø³Øª Ùˆ Ù¾ÙˆØ²ÛŒØ´Ù† Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡</li>
          <li><b>Call</b>: ÙÙ‚Ø· ÙˆÙ‚ØªÛŒ Ù¾Ù„Ù† Ø¯Ø§Ø±ÛŒ (Ø®ØµÙˆØµØ§Ù‹ Ø¯Ø§Ø®Ù„ Ù¾ÙˆØ²ÛŒØ´Ù†)</li>
          <li><b>Fold</b>: ØªØµÙ…ÛŒÙ… Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ Ù†Ù‡ ØªØ±Ø³</li>
        </ul>
        <div class="note gold">ğŸ¯ Ù†Ú©ØªÙ‡: Call Ø²ÛŒØ§Ø¯ Ø¨ÛŒØ±ÙˆÙ† Ù¾ÙˆØ²ÛŒØ´Ù† = Ù„ÛŒÚ© Ø¨Ø²Ø±Ú¯.</div>
      `;
    } else if(cat==="Postflop"){
      core = `
        <h3>Ù¾Ø³Øªâ€ŒÙÙ„Ø§Ù¾ ÛŒØ¹Ù†ÛŒ Ù¾Ù„Ù†</h3>
        <p>Ù‡Ø± Ø´Ø±Ø· Ø¨Ø§ÛŒØ¯ Ø¯Ù„ÛŒÙ„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯: Value ÛŒØ§ Bluff ÛŒØ§ Protection ÛŒØ§ Ú©Ù†ØªØ±Ù„ Ù¾Ø§Øª.</p>
        <h3>Ù‚Ø¨Ù„ Ø§Ø² Bet Ø§ÛŒÙ† Û³ Ø³Ø¤Ø§Ù„</h3>
        <ul>
          <li>Ø§ÛŒÙ† Ø´Ø±Ø· Ø¨Ø±Ø§ÛŒ ValueÙ‡ ÛŒØ§ BluffØŸ</li>
          <li>Ú†Ù‡ Ø¯Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†ØŸ Ú†Ù‡ Ø¯Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ ÙÙˆÙ„Ø¯ØŸ</li>
          <li>Ø§Ú¯Ø± Ú©Ø§Ù„ Ø´Ø¯Ù…ØŒ ØªØ±Ù†/Ø±ÛŒÙˆØ± Ú†ÛŒØŸ</li>
        </ul>
        <div class="note warn">ğŸš« Ø´Ø±Ø· Ø¨ÛŒâ€ŒÙ‡Ø¯Ù = Ù¾ÙˆÙ„â€ŒØ³ÙˆØ²ÛŒ Ùˆ Ø¯Ø§Ø¯Ù† Ø§Ø·Ù„Ø§Ø¹Ø§Øª.</div>
      `;
    } else if(cat==="Advanced"){
      core = `
        <h3>ØªÙÚ©Ø± Ø±Ù†Ø¬ÛŒ (Range Thinking)</h3>
        <p>Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒÙ‡Ø§ Ø¨Ø§ Â«Ø±Ù†Ø¬â€ŒÙ‡Ø§Â» Ø¨Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù† Ù†Ù‡ Ø¨Ø§ ÛŒÚ© Ø¯Ø³Øª. Ù‡Ø± Ø§Ú©Ø´Ù† Ø­Ø±ÛŒÙ Ø¨Ø®Ø´ÛŒ Ø§Ø² Ø±Ù†Ø¬Ø´ Ø±Ø§ Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
        <h3>ØªÙ…Ø±ÛŒÙ† Ø°Ù‡Ù†ÛŒ</h3>
        <ul>
          <li>Ø¨Ù‡ Ø¬Ø§ÛŒ Â«Ø­Ø±ÛŒÙ Ú†ÛŒ Ø¯Ø§Ø±Ù‡ØŸÂ» Ø¨Ù¾Ø±Ø³ Â«Ú†Ù‡ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡ØŸÂ»</li>
          <li>Ø§ÛŒÙ† Ø¨Ø±Ø¯ Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ Ø±Ù†Ø¬ Ú©ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡ØŸ</li>
          <li>Ù„Ø§ÛŒÙ† Ù…Ù† Ø¯Ø§Ø³ØªØ§Ù† Ù…Ù†Ø·Ù‚ÛŒ Ø¯Ø§Ø±Ù‡ØŸ</li>
        </ul>
        <div class="note ok">âœ… Ù‡Ù…ÛŒÙ† ÛŒÚ© Ø°Ù‡Ù†ÛŒØªØŒ Ø¨Ø§Ø²ÛŒ Ø±Ùˆ Ø¯Ú¯Ø±Ú¯ÙˆÙ† Ù…ÛŒâ€ŒÚ©Ù†Ù‡.</div>
      `;
    } else if(cat==="Mental"){
      core = `
        <h3>Ø°Ù‡Ù† Ùˆ Ø³Ø±Ù…Ø§ÛŒÙ‡ = Ø³ØªÙˆÙ† Ø§ØµÙ„ÛŒ</h3>
        <p>Ø§Ú¯Ù‡ ØªÛŒÙ„Øª Ø¨Ø´ÛŒØŒ Ù‡Ø±Ú†ÛŒ ØªÚ©Ù†ÛŒÚ© Ø¨Ù„Ø¯ Ø¨Ø§Ø´ÛŒ Ù…ÛŒâ€ŒÙ¾Ø§Ø´Ù‡.</p>
        <h3>Ù‚Ø§Ù†ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙÙˆØ±ÛŒ Ø¶Ø¯ ØªÛŒÙ„Øª</h3>
        <ul>
          <li>Stop-loss Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ (Ù…Ø«Ù„Ø§ Û² Ø¨Ø§ÛŒâ€ŒØ§ÛŒÙ†)</li>
          <li>Ø§Ú¯Ø± Ø¹ØµØ¨ÛŒ Ø´Ø¯ÛŒ: Break Ø§Ø¬Ø¨Ø§Ø±ÛŒ</li>
          <li>Ú©Ù…ØªØ± Ø¯Ø³Øª Ø¨Ø§Ø²ÛŒ Ú©Ù†ØŒ Ø¨Ù‡ØªØ± ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±</li>
        </ul>
        <div class="note warn">ğŸš« Ø¬Ø¨Ø±Ø§Ù† Ø¹ØµØ¨ÛŒ = Ù†Ø§Ø¨ÙˆØ¯ÛŒ Ø³Ø±Ù…Ø§ÛŒÙ‡.</div>
      `;
    } else {
      // Glossary
      const terms = [
        ["Range","Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù† Ø­Ø±ÛŒÙ"],
        ["Equity","Ø´Ø§Ù†Ø³ Ø¨Ø±Ø¯ Ø¯Ø± Ø¢Ù† Ù„Ø­Ø¸Ù‡"],
        ["EV","Ø³ÙˆØ¯/Ø¶Ø±Ø± Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª ÛŒÚ© ØªØµÙ…ÛŒÙ…"],
        ["Fold Equity","Ø´Ø§Ù†Ø³ Ø§ÛŒÙ†Ú©Ù‡ Ø­Ø±ÛŒÙ ÙÙˆÙ„Ø¯ Ø¨Ø¯Ù‡"],
        ["C-bet","Ø´Ø±Ø· Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ² Ù¾Ø±ÛŒÙÙ„Ø§Ù¾"],
        ["Blocker","Ú©Ø§Ø±ØªÛŒ Ú©Ù‡ Ø¨Ø±Ø®ÛŒ Ø¯Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø­Ø±ÛŒÙ Ø±Ø§ Ú©Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯"],
        ["Polarized","Ø±Ù†Ø¬ Ø®ÛŒÙ„ÛŒ Ù‚ÙˆÛŒ ÛŒØ§ Ø¨Ù„ÙˆÙ Ø®Ø§Ù„Øµ"],
        ["Thin Value","ÙˆÙ„ÛŒÙˆ Ø¨Ø§ Ø¯Ø³Øª Ù…ØªÙˆØ³Ø· Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ù¾ÙˆÙ„ Ø§Ø² Ø¨Ø¯ØªØ±Ù‡Ø§"],
      ];
      const t = terms[(n-951) % terms.length];
      core = `
        <h3>Ø§ØµØ·Ù„Ø§Ø­: ${t[0]}</h3>
        <p>${t[1]}</p>
        <h3>Ù†Ú©ØªÙ‡ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</h3>
        <ul>
          <li>Ø§ÛŒÙ† Ø§ØµØ·Ù„Ø§Ø­ Ø±Ø§ Ø¯Ø± ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ØŒ Ù†Ù‡ ÙÙ‚Ø· Ø­ÙØ¸ÛŒ.</li>
          <li>Ø§Ú¯Ø± Ø¯ÛŒØ¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø¯Ø§Ø±Ù‡: ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ú©Ù†.</li>
        </ul>
        <div class="note gold">ğŸ“Œ ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡ 951 ØªØ§ 1000 Ù¾Ø± Ø§Ø² Ø§ØµØ·Ù„Ø§Ø­Ù‡. Ø¨Ø§ Ø³Ø±Ú† Ø³Ø±ÛŒØ¹ Ù¾ÛŒØ¯Ø§Ø´ÙˆÙ† Ù…ÛŒâ€ŒÚ©Ù†ÛŒ.</div>
      `;
    }

    return {
      id: pageId(n),
      n,
      cat,
      icon: meta.icon,
      title,
      sub: `Ø¯Ø³ØªÙ‡: ${meta.name} â€” Ù„ÛŒÙ†Ú©: #${pageId(n)}`,
      body: core + `
        <div class="note ok">
          âœ… Ø§ÛŒÙ† ÙÙ‚Ø· â€œØ§Ø³Ú©Ù„Øª Û±Û°Û°Û° ØµÙØ­Ù‡â€ŒØ§ÛŒâ€ Ø§Ø³Øª.  
          Ù‡Ø± ØµÙØ­Ù‡ Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒÙ… Ø¨Ù‡ Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ø®ÛŒÙ„ÛŒ Ù…ÙØµÙ„â€ŒØªØ± (Ù…Ø«Ù„Ø§ Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„ + Ù…Ø«Ø§Ù„ + ØªÙ…Ø±ÛŒÙ†).
        </div>
      `
    };
  }

  // We do NOT store all huge html in memory as one blob (slow).
  // We'll generate on demand for speed.
  const TOTAL = 1000;

  function getPage(n){
    n = Math.max(1, Math.min(TOTAL, n));
    return makeBody(n);
  }

  // --- Overlay page logic ---
  const pageEl = $("#page");
  const pageH = $("#pageH");
  const pageSub = $("#pageSub");
  const pageBody = $("#pageBody");
  let currentN = 1;

  function openPage(n, push=true){
    const pg = getPage(n);
    currentN = pg.n;

    pageH.textContent = `${pg.icon}  ${pg.title}`;
    pageSub.textContent = pg.sub;
    pageBody.innerHTML = pg.body;

    // apply search highlight inside page
    applySearch();

    pageEl.classList.add("show");
    pageEl.setAttribute("aria-hidden","false");

    // ALWAYS start from top (Ø­Ù„ Ù…Ø´Ú©Ù„ Ø§Ø³Ú©Ø±ÙˆÙ„)
    pageEl.scrollTo({ top: 0, behavior: "instant" });

    if(push){
      const h = "#" + pg.id;
      if(location.hash !== h) history.pushState({n: pg.n}, "", h);
    }

    updateMarkButtons();
    updateProgressUI();
  }

  function closePage(){
    pageEl.classList.remove("show");
    pageEl.setAttribute("aria-hidden","true");
    history.pushState({}, "", location.pathname + location.search);
  }

  // --- Marking done ---
  function markDone(n){
    const p = loadProgress();
    p[pageId(n)] = true;
    saveProgress(p);
    toast("ØªÛŒÚ© Ø´Ø¯ âœ…");
    updateProgressUI();
    renderList();
    updateMarkButtons();
  }

  function isDone(n){
    const p = loadProgress();
    return !!p[pageId(n)];
  }

  function updateMarkButtons(){
    const done = isDone(currentN);
    $("#markBtn").textContent = done ? "âœ… ØªÛŒÚ© Ø´Ø¯Ù‡" : "âœ… Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ùˆ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…";
    $("#markBtn").disabled = done;
    $("#markBtn").style.opacity = done ? .6 : 1;

    $("#markInsideBtn").textContent = done ? "âœ… ØªÛŒÚ© Ø´Ø¯Ù‡" : "âœ… ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…";
    $("#markInsideBtn").disabled = done;
    $("#markInsideBtn").style.opacity = done ? .6 : 1;
  }

  function updateProgressUI(){
    const p = loadProgress();
    const done = Object.keys(p).length;
    $("#doneCount").textContent = done;
    $("#totalCount").textContent = TOTAL;
    const pct = Math.round((done / TOTAL) * 100);
    $("#pct").textContent = pct + "%";
    $("#bar").style.width = pct + "%";
  }

  // --- Search highlight ---
  function stripMarks(el){
    if(!el) return;
    $$("mark", el).forEach(m=>m.replaceWith(document.createTextNode(m.textContent)));
  }
  function highlight(el, q){
    if(!q.trim()) return 0;
    const query = q.trim().toLowerCase();
    let count = 0;

    const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {
      acceptNode(node){
        if(!node.nodeValue) return NodeFilter.FILTER_REJECT;
        const p = node.parentElement?.tagName;
        if(["SCRIPT","STYLE","MARK","INPUT","TEXTAREA","BUTTON"].includes(p)) return NodeFilter.FILTER_REJECT;
        return node.nodeValue.toLowerCase().includes(query) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
      }
    });

    const nodes=[];
    while(walker.nextNode()) nodes.push(walker.currentNode);

    nodes.forEach(node=>{
      const txt=node.nodeValue;
      const low=txt.toLowerCase();
      let idx=low.indexOf(query);
      if(idx<0) return;

      const frag=document.createDocumentFragment();
      let last=0;
      while(idx!==-1){
        frag.appendChild(document.createTextNode(txt.slice(last, idx)));
        const m=document.createElement("mark");
        m.textContent=txt.slice(idx, idx+query.length);
        frag.appendChild(m);
        count++;
        last=idx+query.length;
        idx=low.indexOf(query, last);
      }
      frag.appendChild(document.createTextNode(txt.slice(last)));
      node.parentNode.replaceChild(frag, node);
    });

    return count;
  }
  function applySearch(){
    const q = $("#q").value || "";
    if(!pageEl.classList.contains("show")) return;
    stripMarks(pageBody);
    if(!q.trim()) return;
    const hits = highlight(pageBody, q);
    if(hits) toast(`Ù¾ÛŒØ¯Ø§ Ø´Ø¯: ${hits}`);
  }

  // --- List (paged for performance) ---
  let listPage = 0;
  const PAGE_SIZE = 60;

  function iconForCat(cat){
    return (CAT_META[cat]||{icon:"ğŸ“„"}).icon;
  }
  function nameForCat(cat){
    return (CAT_META[cat]||{name:"â€”"}).name;
  }

  function matchesSearch(pg, query){
    if(!query) return true;
    const q = query.toLowerCase();
    // we only check title + cat + a few keywords (fast)
    const hay = `${pg.title} ${pg.cat} ${nameForCat(pg.cat)}`.toLowerCase();
    return hay.includes(q);
  }

  function renderList(){
    const list = $("#list");
    list.innerHTML = "";

    const q = ($("#q").value || "").trim();
    const cat = $("#cat").value;

    // build filtered indices without creating huge html
    const indices = [];
    for(let n=1;n<=TOTAL;n++){
      const c = categoryOf(n);
      if(cat!=="all" && c!==cat) continue;
      const pg = { title: `ØµÙØ­Ù‡ ${n} â€” ${nameForCat(c)}`, cat:c };
      if(!matchesSearch(pg, q)) continue;
      indices.push(n);
    }

    const totalFiltered = indices.length;
    const maxListPage = Math.max(0, Math.ceil(totalFiltered / PAGE_SIZE) - 1);
    listPage = Math.max(0, Math.min(listPage, maxListPage));

    const start = listPage * PAGE_SIZE;
    const slice = indices.slice(start, start + PAGE_SIZE);

    $("#listInfo").textContent = `Ù†ØªÛŒØ¬Ù‡: ${totalFiltered} ØµÙØ­Ù‡ | Ù†Ù…Ø§ÛŒØ´: ${start+1}-${Math.min(start+slice.length,totalFiltered)} | ØµÙØ­Ù‡ Ù„ÛŒØ³Øª: ${listPage+1}`;

    slice.forEach(n=>{
      const catN = categoryOf(n);
      const done = isDone(n);
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "rowBtn";
      btn.innerHTML = `
        <span class="badge">${iconForCat(catN)}</span>
        <span class="meta">
          <span class="t">
            ØµÙØ­Ù‡ ${String(n).padStart(4,"0")} â€” ${nameForCat(catN)}
            <span class="status ${done ? "ok":"todo"}">${done ? "ØªÛŒÚ©" : "Ø¯Ø±Ø­Ø§Ù„"}</span>
          </span>
          <span class="d">Ù„ÛŒÙ†Ú©: #${pageId(n)} | Ú©Ù„ÛŒÚ© Ú©Ù† ØªØ§ Ø¨Ø§Ø² Ø´Ù‡</span>
        </span>
      `;
      btn.addEventListener("click", ()=>openPage(n));
      list.appendChild(btn);
    });

    if(slice.length===0){
      const empty = document.createElement("div");
      empty.className = "note gold";
      empty.textContent = "Ú†ÛŒØ²ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯â€¦ Ø³Ø±Ú† ÛŒØ§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ùˆ Ø¹ÙˆØ¶ Ú©Ù† ğŸ˜…";
      list.appendChild(empty);
    }
  }

  // --- Helpers ---
  function parseHashToN(){
    const h = (location.hash || "").replace("#","");
    const m = /^p-(\d{4})$/.exec(h);
    if(!m) return null;
    const n = parseInt(m[1],10);
    if(!n || n<1 || n>TOTAL) return null;
    return n;
  }

  function randomN(){
    return Math.floor(Math.random()*TOTAL)+1;
  }

  async function copyLink(){
    const url = location.href;
    try{
      await navigator.clipboard.writeText(url);
      toast("Ù„ÛŒÙ†Ú© Ú©Ù¾ÛŒ Ø´Ø¯ âœ…");
    }catch{
      toast("Ú©Ù¾ÛŒ Ù†Ø´Ø¯ âŒ");
    }
  }

  // --- Events ---
  $("#resetBtn").addEventListener("click", resetProgress);
  $("#resetAllBtn").addEventListener("click", resetProgress);

  $("#markBtn").addEventListener("click", ()=>markDone(currentN));
  $("#markInsideBtn").addEventListener("click", ()=>markDone(currentN));

  $("#openFirstBtn").addEventListener("click", ()=>openPage(1));
  $("#randomBtn").addEventListener("click", ()=>openPage(randomN()));

  $("#prevBtn").addEventListener("click", ()=>openPage(Math.max(1, currentN-1)));
  $("#nextBtn").addEventListener("click", ()=>openPage(Math.min(TOTAL, currentN+1)));

  $("#backBtn").addEventListener("click", closePage);
  $("#copyLinkBtn").addEventListener("click", copyLink);

  $("#q").addEventListener("input", ()=>{
    renderList();
    applySearch();
  });
  $("#cat").addEventListener("change", ()=>{
    listPage = 0;
    renderList();
  });

  $("#jumpBtn").addEventListener("click", ()=>{
    const v = parseInt($("#jumpInput").value, 10);
    if(!v || v<1 || v>TOTAL){ toast("Ø´Ù…Ø§Ø±Ù‡ Ù…Ø¹ØªØ¨Ø± 1 ØªØ§ 1000 Ø¨Ø¯Ù‡ ğŸ˜…"); return; }
    openPage(v);
  });

  $("#prevListBtn").addEventListener("click", ()=>{
    listPage = Math.max(0, listPage-1);
    renderList();
  });
  $("#nextListBtn").addEventListener("click", ()=>{
    listPage = listPage+1;
    renderList();
  });

  // Bottom tabs
  $$(".tab").forEach(t=>{
    t.addEventListener("click", ()=>{
      $$(".tab").forEach(x=>x.classList.remove("on"));
      t.classList.add("on");
      const mode = t.dataset.tab;
      if(mode==="home"){ closePage(); window.scrollTo({top:0, behavior:"smooth"}); toast("Ø®Ø§Ù†Ù‡ ğŸ "); }
      if(mode==="list"){ closePage(); toast("Ù„ÛŒØ³Øª ğŸ“–"); }
      if(mode==="random"){ openPage(randomN()); }
    });
  });

  // Back/forward
  window.addEventListener("popstate", ()=>{
    const n = parseHashToN();
    if(n) openPage(n, false);
    else pageEl.classList.remove("show");
  });

  // Init
  updateProgressUI();
  renderList();

  // Open hash page if any
  const initN = parseHashToN();
  if(initN) openPage(initN, false);
</script>
</body>
</html>
